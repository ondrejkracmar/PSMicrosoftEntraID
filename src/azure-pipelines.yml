name: PowershellModule-PSAzureADDirectory-Deployment
trigger:
  - main

resources:
  repositories:
    - repository: DevOpsAutomation
      type: git
      name: AutomationPlatform/DevOpsAutomation
      ref: master
steps:
   - task: PowerShell@2
     displayName: Prerequisites
     inputs:
       targetType: filePath
       filePath: "./src//build/vsts-prerequisites.ps1"

   - task: PowerShell@2
     displayName: Validate
     inputs:
       targetType: filePath
       filePath: "./src/build/vsts-validate.ps1"

  # - task: PublishTestResults@2
  #   displayName: "Publish Test Results **/TEST-*.xml"
  #   inputs:
  #     testResultsFormat: NUnit
  #   condition: always()

  #- template: SetupRepoTemplate.yml
  #  parameters:
  #    packageSourceUrl: "https://pkgs.dev.azure.com/i-system/AutomationPlatform/_packaging/AzAPPSModules/nuget/v2"
  #    pat: $(System.AccessToken)
